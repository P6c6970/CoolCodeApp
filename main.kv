ScreenManager:
    Screen:
        name: 'main'
        BoxLayout:
            orientation:'vertical'

            MDToolbar:
                id: toolbar
                title: 'Главная'
                md_bg_color: app.theme_cls.bg_light if app.theme_cls.theme_style == "Dark" else app.theme_cls.bg_darkest
                specific_text_color: (.59, .7, .14, 1) if app.theme_cls.theme_style == "Dark" else (.48, .57, .11, 1)

            MDBottomNavigation:
                panel_color: app.theme_cls.bg_light if app.theme_cls.theme_style == "Dark" else app.theme_cls.bg_darkest
                #text_color_normal: 0, 0, 0, 1
                text_color_active: (.59, .7, .14, 1) if app.theme_cls.theme_style == "Dark" else (.48, .57, .11, 1)

                MDBottomNavigationItem:
                    name: 'screen 1'
                    #text: 'Главная'
                    icon: 'snake'
                    #on_tab_release: toolbar.title = self.text
                    on_tab_release: toolbar.title = 'Главная'

                    MyMDCard:
                        size_hint: 0.9, 0.6

                        MDLabel:
                            font_size: dp(25)
                            font_name: 'data/Neucha.ttf'
                            text: 'Это приложение создано как дополнение к сайту pavellip.pythonanywhere.com его функционал ограничен по сравнению с сайтом, вы можете читать упрошенные версии статей'
                            halign: 'center'
                            theme_text_color: "Custom"
                            text_color: (.59, .7, .14, 1) if app.theme_cls.theme_style == "Dark" else (.48, .57, .11, 1)

                MDBottomNavigationItem:
                    name: 'screen 2'
                    #text: 'Статьи'
                    icon: 'book-open'
                    on_tab_release: toolbar.title = 'Статьи'

                    ScrollView:
                        do_scroll_x: False
                        padding: dp(20)
                        spacing: dp(10)
                        MDList:
                            id: box
                            spacing: 5

                MDBottomNavigationItem:
                    name: 'screen 3'
                    #text: 'Игра'
                    icon: 'controller-classic'
                    on_tab_release: toolbar.title = 'Игра'

                    MyMDCard:
                        size_hint: 0.9, 0.6
                        padding: dp(20)

                        MDLabel:
                            font_size: dp(25)
                            font_name: 'data/Neucha.ttf'
                            text: 'Здесь может когда-то будут ваши уровни или подсказки к ним'
                            halign: 'center'
                            theme_text_color: "Custom"
                            text_color: (.59, .7, .14, 1) if app.theme_cls.theme_style == "Dark" else (.48, .57, .11, 1)

                MDBottomNavigationItem:
                    name: 'screen 4'
                    #text: 'Профиль'
                    icon: 'account-box'
                    on_tab_release: toolbar.title = 'Профиль'

                    MyMDCard:
                        size_hint: 0.9, 0.6
                        #padding: dp(40)
                        #spacing: dp(40)
                        BoxLayout:
                            orientation:'vertical'
                            size_hint: 1, .45
                            pos_hint: {"center_x": 0.5, "center_y": 0.5}
                            MDLabel:
                                id: text_profile_1
                                font_size: dp(25)
                                font_name: 'data/Neucha.ttf'
                                text: 'Загрузка данных'
                                halign: 'center'
                                theme_text_color: "Custom"
                                text_color: (.59, .7, .14, 1) if app.theme_cls.theme_style == "Dark" else (.48, .57, .11, 1)
                                #pos_hint: {"center_y": 1}
                                size_hint: 1, 2.4

                            BoxLayout:
                                size_hint: 1, .2
                                orientation:'horizontal'
                                #size_y: dp(25)
                                #size_hint_y: None

                                MDLabel:
                                    id: text_profile_2
                                    font_size: dp(25)
                                    font_name: 'data/Neucha.ttf'
                                    text: 'Загрузка данных'
                                    halign: "right"
                                    theme_text_color: "Custom"
                                    text_color: (.59, .7, .14, 1) if app.theme_cls.theme_style == "Dark" else (.48, .57, .11, 1)
                                    size_hint: 2, 1

                                Image:
                                    source: 'data/bitcoin.png'
                                    allow_stretch: True
                                    size_hint: 0.5, 3.5
                                    pos_hint: {"x": 1, "center_y": 0.5}

                                Widget:
                                    size_hint_x: 1

                            MDLabel:
                                id: text_profile_3
                                font_size: dp(25)
                                font_name: 'data/Neucha.ttf'
                                text: 'Загрузка данных'
                                halign: 'center'
                                theme_text_color: "Custom"
                                text_color: (.59, .7, .14, 1) if app.theme_cls.theme_style == "Dark" else (.48, .57, .11, 1)
                                #pos_hint: {"center_y": 0}
                                size_hint: 1, 1
                MDBottomNavigationItem:
                    name: 'screen 5'
                    #text: 'Настройки'
                    icon: 'tools'
                    on_tab_release: toolbar.title = "Настройки"

                    MyMDCard:
                        size_hint: 0.9, 0.6

                        BoxLayout:
                            orientation:'vertical'
                            #size_hint: 1, .45
                            pos_hint: {"center_x": 0.5, "center_y": 0.5}

                            MDRoundFlatButton:
                                text: "Сменить тему"
                                font_size: dp(22)
                                font_name: 'data/Neucha.ttf'
                                pos_hint: {"center_x": 0.5}
                                on_press: app.change_theme()
                                md_bg_color: (.59, .7, .14, 1) if app.theme_cls.theme_style == "Dark" else (.48, .57, .11, 1)
                                text_color: (0, 0, 0, 1) if app.theme_cls.theme_style == "Dark" else (1, 1, 1, 1)
                                line_color: .48, .57, .11, 1

                            Widget:
                                size_hint_y: None
                                height: dp(40)

                            MDRoundFlatButton:
                                text: "Выход"
                                font_size: dp(22)
                                font_name: 'data/Neucha.ttf'
                                pos_hint: {"center_x": 0.5}
                                on_press: app.auth_exit(), box.clear_widgets()
                                md_bg_color: (.59, .7, .14, 1) if app.theme_cls.theme_style == "Dark" else (.48, .57, .11, 1)
                                text_color: (0, 0, 0, 1) if app.theme_cls.theme_style == "Dark" else (1, 1, 1, 1)
                                line_color: .48, .57, .11, 1

                            Widget:
                                size_hint_y: None
                                height: dp(100)
    Screen:
        name: 'login'
        MyMDCard:
            size_hint: 0.9, 0.7
            elevation: dp(10)
            padding: dp(20)
            spacing: dp(25)
            orientation: 'vertical'

            MDLabel:
                id: welcome_label
                text: "Авторизация"
                font_size: dp(38)
                font_name: 'data/Neucha.ttf'
                halign: 'center'
                size_hint_y: None
                height: self.texture_size[1]
                padding_y: dp(15)
                theme_text_color: "Custom"
                text_color: (.59, .7, .14, 1) if app.theme_cls.theme_style == "Dark" else (.48, .57, .11, 1)

            MDTextFieldRound:
                id: user
                hint_text: "логин"
                icon_right: "account"
                size_hint_x: 0.8
                font_size: dp(20)
                font_name: 'data/Neucha.ttf'
                pos_hint: {"center_x": 0.5}

            MDTextFieldRoundPas:
                id: password
                hint_text: "пароль"
                icon_right: "eye-off"
                size_hint_x: 0.8
                font_size: dp(20)
                pos_hint: {'center_x': 0.5}
                password: True
                password_mask: '•'
                font_name: 'data/Neucha.ttf'

            MDSpinner:
                id: spiner
                size_hint: None, None
                size: dp(46), dp(46)
                pos_hint: {'center_x': .5, 'center_y': .5}
                active: False

            MDRoundFlatButton:
                text: "Вход"
                font_size: dp(22)
                font_name: 'data/Neucha.ttf'
                pos_hint: {"center_x": 0.5}
                on_press: app.logger()
                md_bg_color: (.59, .7, .14, 1) if app.theme_cls.theme_style == "Dark" else (.48, .57, .11, 1)
                text_color: (0, 0, 0, 1) if app.theme_cls.theme_style == "Dark" else (1, 1, 1, 1)
                line_color: .48, .57, .11, 1

            Widget:
                size_hint_y: None
                height: dp(14)
    Screen:
        name: "post_screen"

        BoxLayout:
            orientation:'vertical'

            MDToolbar:
                id: post_name
                title: 'Статья'
                md_bg_color: app.theme_cls.bg_light if app.theme_cls.theme_style == "Dark" else app.theme_cls.bg_darkest
                specific_text_color: (.59, .7, .14, 1) if app.theme_cls.theme_style == "Dark" else (.48, .57, .11, 1)

            ScrollView:
                id: scroll
                scroll_type: ['bars', 'content']
                #bar_width: dp(10)
            #    CodeInput:
            #        id: post
            #        text: "загрузка"
                Label:
                    id: post
                    #canvas.before:
                    #    Color:
                    #        rgba: (0.8, 0.2, 0.5, 1)
                    #    RoundedRectangle:
                    #        radius: [100]
                    #        pos:self.pos
                    #        size:self.size

                    size_hint_y: None
                    height: self.texture_size[1]
                    text_size: self.width, None
                    text: 'Загрузка...'
                    font_size: dp(25)
                    font_name: 'data/Neucha.ttf'
                    color: (.59, .7, .14, 1) if app.theme_cls.theme_style == "Dark" else (.48, .57, .11, 1)
                    padding: dp(35), dp(35)
                #MDLabel:
                #    id: post
                #    font_size: dp(25)
                #    font_name: 'data/Neucha.ttf'
                #    text: 'Загрузка статьи'
                #    halign: 'center'
                #    theme_text_color: "Custom"
                #    text_color: (.59, .7, .14, 1) if app.theme_cls.theme_style == "Dark" else (.48, .57, .11, 1)

    Screen:
        name: "error_connect"

        MyMDCard:
            size_hint: 0.9, 0.7
            orientation:'vertical'
            spacing: dp(25)

            MDLabel:
                text: "Отсутствует соединение с сервером"
                font_size: dp(38)
                font_name: 'data/Neucha.ttf'
                halign: 'center'
                size_hint_y: None
                height: self.texture_size[1]
                padding_y: dp(15)
                theme_text_color: "Custom"
                text_color: (.59, .7, .14, 1) if app.theme_cls.theme_style == "Dark" else (.48, .57, .11, 1)

            MDIconButton:
                icon: 'wifi-off'
                pos_hint: {"center_x": 0.5}
                md_bg_color: .502, .502, .502, 1
                icon_size: dp(30)
                on_press: app.check_connect()

            MDLabel:
                text: "Нажмите на знак, чтобы обновить"
                font_size: dp(28)
                font_name: 'data/Neucha.ttf'
                halign: 'center'
                size_hint_y: None
                height: self.texture_size[1]
                padding_y: dp(15)
                theme_text_color: "Custom"
                text_color: (.59, .7, .14, 1) if app.theme_cls.theme_style == "Dark" else (.48, .57, .11, 1)

            Widget:
                size_hint_y: None
                height: dp(35)

<OneLineListItemAligned>:
    theme_text_color: "Custom"
    text_color: (.59, .7, .14, 1) if app.theme_cls.theme_style == "Dark" else (.48, .57, .11, 1)

<MyMDCard>:
    pos_hint: {"center_x": 0.5, "center_y": 0.5}
    line_color: (.59, .7, .14, 1) if app.theme_cls.theme_style == "Dark" else (.48, .57, .11, 1)
    md_bg_color: app.theme_cls.bg_light if app.theme_cls.theme_style == "Dark" else app.theme_cls.bg_darkest
